<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mapper.EmployeeMapper">
    <resultMap id="EmployeeResult" type="com.entity.Employee">
        <result column="userid" property="userid" />
        <result column="username" property="username" />
        <result column="password" property="password" />
        <result column="countOfWorkInput" property="countOfWorkInput" />
    </resultMap>
	<select id="getAllEmployee" resultMap="EmployeeResult">
		SELECT userid, username, password, biko
		FROM users;
	</select>
	<update id="updateEmployeeById">
		UPDATE users set username = #{username}, biko = #{biko}
		WHERE userid = #{userid}
	</update>
	<insert id="insertEmployee">
		INSERT INTO  users (userid,username,biko)
		VALUES (#{userid},#{username},#{biko})
	</insert>
	<delete id="deleteEmployeeById">
		DELETE FROM users WHERE userid = #{userid};
	</delete>
	<select id="getUserWorksSatatus" resultMap="EmployeeResult">
		select userid,
		       username,
			   password,
			   (select count(userid) as countofadmin
		        from workmonth
		        where userid = users.userid and
		              year = #{year} and
		              month = #{month}) as countOfWorkInput
		from users
	</select>
</mapper>